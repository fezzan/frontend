{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/talhafiaz/Projects/React/Controrg/src/views/auth-views/components/LoginForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { Button, Form, Input, Divider, Alert, message as msg } from \"antd\";\nimport { MailOutlined, LockOutlined } from \"@ant-design/icons\";\nimport PropTypes from \"prop-types\";\nimport { showLoading, showAuthMessage, hideAuthMessage, authenticated } from \"redux/actions/Auth\";\nimport JwtAuthService from \"services/JwtAuthService\";\nimport { useHistory } from \"react-router-dom\";\nimport { motion } from \"framer-motion\";\nimport { AUTHENTICATED, AUTH_TOKEN } from \"redux/constants/Auth\";\nimport { API_BASE_URL } from \"configs/AppConfig\";\nexport const LoginForm = props => {\n  _s();\n\n  let dispatch = useDispatch();\n  let history = useHistory();\n  const [load, setload] = useState(false);\n  const {\n    otherSignIn,\n    showForgetPassword,\n    hideAuthMessage,\n    onForgetPasswordClick,\n    showLoading,\n    extra,\n    loading,\n    showMessage,\n    message,\n    authenticated,\n    showAuthMessage,\n    token,\n    redirect,\n    allowRedirect\n  } = props;\n\n  const onLogin = values => {\n    setload(true);\n    console.log(values);\n    fetch(API_BASE_URL + \"signin\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(values)\n    }).then(res => {\n      res.json().then(data => {\n        if (data.token) {\n          setload(false);\n          msg.success(\"Successfully Done :) \");\n          localStorage.setItem(AUTH_TOKEN, data.token);\n          dispatch({\n            type: AUTHENTICATED,\n            token: data.token\n          });\n          history.push(redirect);\n        } else {\n          setload(false);\n          msg.error(\"failed to login\");\n        }\n      });\n    });\n  };\n\n  useEffect(() => {\n    if (token !== null && allowRedirect) {\n      history.push(redirect);\n    }\n\n    if (showMessage) {\n      setTimeout(() => {\n        hideAuthMessage();\n      }, 3000);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        marginBottom: 0\n      },\n      animate: {\n        opacity: showMessage ? 1 : 0,\n        marginBottom: showMessage ? 20 : 0\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"error\",\n        showIcon: true,\n        message: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      layout: \"vertical\",\n      name: \"login-form\",\n      onFinish: onLogin,\n      children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"email\",\n        label: \"Email\",\n        rules: [{\n          required: true,\n          message: \"Please input your email\"\n        }, {\n          type: \"email\",\n          message: \"Please enter a validate email!\"\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          prefix: /*#__PURE__*/_jsxDEV(MailOutlined, {\n            className: \"text-primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"password\",\n        label: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${showForgetPassword ? \"d-flex justify-content-between w-100 align-items-center\" : \"\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 15\n          }, this), showForgetPassword && /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => onForgetPasswordClick,\n            className: \"cursor-pointer font-size-sm font-weight-normal text-muted\",\n            children: \"Forget Password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this),\n        rules: [{\n          required: true,\n          message: \"Please input your password\"\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input.Password, {\n          prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {\n            className: \"text-primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          block: true,\n          loading: load,\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), extra]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(LoginForm, \"nEC+Uh2d18tFR+IiwmBl60dFJt0=\", false, function () {\n  return [useDispatch, useHistory];\n});\n\n_c = LoginForm;\nLoginForm.propTypes = {\n  otherSignIn: PropTypes.bool,\n  showForgetPassword: PropTypes.bool,\n  extra: PropTypes.oneOfType([PropTypes.string, PropTypes.element])\n};\nLoginForm.defaultProps = {\n  otherSignIn: true,\n  showForgetPassword: false\n};\n\nconst mapStateToProps = ({\n  auth\n}) => {\n  const {\n    loading,\n    message,\n    showMessage,\n    token,\n    redirect\n  } = auth;\n  return {\n    loading,\n    message,\n    showMessage,\n    token,\n    redirect\n  };\n};\n\nconst mapDispatchToProps = {\n  showAuthMessage,\n  showLoading,\n  hideAuthMessage,\n  authenticated\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["/Users/talhafiaz/Projects/React/Controrg/src/views/auth-views/components/LoginForm.js"],"names":["React","useEffect","useState","connect","useDispatch","Button","Form","Input","Divider","Alert","message","msg","MailOutlined","LockOutlined","PropTypes","showLoading","showAuthMessage","hideAuthMessage","authenticated","JwtAuthService","useHistory","motion","AUTHENTICATED","AUTH_TOKEN","API_BASE_URL","LoginForm","props","dispatch","history","load","setload","otherSignIn","showForgetPassword","onForgetPasswordClick","extra","loading","showMessage","token","redirect","allowRedirect","onLogin","values","console","log","fetch","method","headers","Accept","body","JSON","stringify","then","res","json","data","success","localStorage","setItem","type","push","error","setTimeout","opacity","marginBottom","required","propTypes","bool","oneOfType","string","element","defaultProps","mapStateToProps","auth","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect,useState } from \"react\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { Button, Form, Input, Divider, Alert, message as msg } from \"antd\";\nimport { MailOutlined, LockOutlined } from \"@ant-design/icons\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  showLoading,\n  showAuthMessage,\n  hideAuthMessage,\n  authenticated,\n} from \"redux/actions/Auth\";\nimport JwtAuthService from \"services/JwtAuthService\";\nimport { useHistory } from \"react-router-dom\";\nimport { motion } from \"framer-motion\";\nimport { AUTHENTICATED, AUTH_TOKEN } from \"redux/constants/Auth\";\nimport { API_BASE_URL } from \"configs/AppConfig\";\n\nexport const LoginForm = (props) => {\n  let dispatch = useDispatch();\n  let history = useHistory();\n\n  const [load, setload] = useState(false);\n\n  const {\n    otherSignIn,\n    showForgetPassword,\n    hideAuthMessage,\n    onForgetPasswordClick,\n    showLoading,\n    extra,\n    loading,\n    showMessage,\n    message,\n    authenticated,\n    showAuthMessage,\n    token,\n    redirect,\n    allowRedirect,\n  } = props;\n\n  const onLogin = (values) => {\n    setload(true);\n    console.log(values);\n\n    fetch(API_BASE_URL + \"signin\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(values),\n    }).then((res) => {\n      res.json().then((data) => {\n        if (data.token) {\n          setload(false);\n          msg.success(\"Successfully Done :) \");\n\n          localStorage.setItem(AUTH_TOKEN, data.token);\n          dispatch({\n            type: AUTHENTICATED,\n            token: data.token,\n          });\n          history.push(redirect);\n        } else {\n          setload(false);\n          msg.error(\"failed to login\");\n        }\n      });\n    });\n  };\n\n  useEffect(() => {\n    if (token !== null && allowRedirect) {\n      history.push(redirect);\n    }\n    if (showMessage) {\n      setTimeout(() => {\n        hideAuthMessage();\n      }, 3000);\n    }\n  });\n\n  return (\n    <>\n      <motion.div\n        initial={{ opacity: 0, marginBottom: 0 }}\n        animate={{\n          opacity: showMessage ? 1 : 0,\n          marginBottom: showMessage ? 20 : 0,\n        }}\n      >\n        <Alert type=\"error\" showIcon message={message}></Alert>\n      </motion.div>\n      <Form layout=\"vertical\" name=\"login-form\" onFinish={onLogin}>\n        <Form.Item\n          name=\"email\"\n          label=\"Email\"\n          rules={[\n            {\n              required: true,\n              message: \"Please input your email\",\n            },\n            {\n              type: \"email\",\n              message: \"Please enter a validate email!\",\n            },\n          ]}\n        >\n          <Input prefix={<MailOutlined className=\"text-primary\" />} />\n        </Form.Item>\n        <Form.Item\n          name=\"password\"\n          label={\n            <div\n              className={`${\n                showForgetPassword\n                  ? \"d-flex justify-content-between w-100 align-items-center\"\n                  : \"\"\n              }`}\n            >\n              <span>Password</span>\n              {showForgetPassword && (\n                <span\n                  onClick={() => onForgetPasswordClick}\n                  className=\"cursor-pointer font-size-sm font-weight-normal text-muted\"\n                >\n                  Forget Password?\n                </span>\n              )}\n            </div>\n          }\n          rules={[\n            {\n              required: true,\n              message: \"Please input your password\",\n            },\n          ]}\n        >\n          <Input.Password prefix={<LockOutlined className=\"text-primary\" />} />\n        </Form.Item>\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" block loading={load}>\n            Log In\n          </Button>\n        </Form.Item>\n\n      \n        {extra}\n      </Form>\n    </>\n  );\n};\n\nLoginForm.propTypes = {\n  otherSignIn: PropTypes.bool,\n  showForgetPassword: PropTypes.bool,\n  extra: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n};\n\nLoginForm.defaultProps = {\n  otherSignIn: true,\n  showForgetPassword: false,\n};\n\nconst mapStateToProps = ({ auth }) => {\n  const { loading, message, showMessage, token, redirect } = auth;\n  return { loading, message, showMessage, token, redirect };\n};\n\nconst mapDispatchToProps = {\n  showAuthMessage,\n  showLoading,\n  hideAuthMessage,\n  authenticated,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\n"]},"metadata":{},"sourceType":"module"}